{% set activeMenu = "route" %}
{% set pageheader_title = "Route.show.title"|trans({'%name%': route.name}) %}
{% set pageheader_description = "Route.show.description"|trans %}
{% extends 'TrazeoFrontBundle:Panel:base.html.twig' %}

	{% block css %}
		{{ parent() }}
	   	{% stylesheets
	    	'@SopinetTemplateOpenMapBundle/Resources/public/css/leaflet.css'
	    	output='css/*.css' filter='cssrewrite' %}
	    	<link rel="stylesheet" type="text/css" media="screen" href="{{ asset_url }}" />
		{% endstylesheets %}
 	{% endblock %}
{% block body_content %}

		<div class="row">
			<ul>
				<li>Empieza en:</li>
				
				<li>Termina en:</li>
				
				<li>Descripción:</li>
				
				<li>Distancia:</li>
				
				<li>Niños: {{ cont }} apuntados en esta ruta</li>
				
				<li>Autor: {{ route.admin }}</li>
			</ul>
		</div>

		<h1>MAPA</h1>
		<div id="map"></div>

	
		<div class="row">
			<div class="col-md-6">
				<h3>Grupos de esta ruta</h3>
			</div>
			<div class="col-md-6">
				<a href="{{ path('panel_group_new') }}">
					<button type="button" class="btn btn-warning btn-circle">
						<i class="fa fa-plus"></i>
					</button>
					Crear grupo
				</a>
			</div>
		</div>
		<p>Los usuarios han creado {{ route.groups|length }} grupos en esta ruta</p>
            
        {% for group in route.groups %}
        	{{ group.name }}
        {% endfor %}
{% endblock %}
	
{% block js %}	
	{{ parent() }}
	{% javascripts 
		'@SopinetTemplateOpenMapBundle/Resources/public/js/leaflet.js'	
	%}
	<script type="text/javascript" src="{{ asset_url }}"></script>
	{% endjavascripts %}
	
	<script type="text/javascript">
		/* Leaflet configuration*/ 
		var map = L.map('map').setView([37.8938548, -4.788015299999984], 16);
		L.tileLayer('http://{s}.tile.cloudmade.com/8ee2a50541944fb9bcedded5165f09d9/997/256/{z}/{x}/{y}.png', {
		    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://cloudmade.com">CloudMade</a>',
		}).addTo(map);
		var marker = L.marker([37.8938548, -4.788015299999984]).addTo(map);
	</script>
{% endblock %}
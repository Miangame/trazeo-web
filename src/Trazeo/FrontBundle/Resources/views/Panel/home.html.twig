{% extends 'TrazeoFrontBundle:Panel:base.html.twig' %}
{% block body_content %}
    <!-- START Bootstrap row -->
	<div class="row">
        <!-- START rideGroups -->
		{% if groupsRide %}
        <div class="col-lg-12 currentGroups alert alert-success">
        	<div class="col-md-1">
        		<i class="fa fa-5x fa-clock-o"></i>
        	</div>
        	<div class="col-md-11">
				<h3>{{ 'Ride.yes.title'|trans }}</h3>
				<p>{{ 'Ride.yes.description'|trans }}</p>
				<br />
				{% for group in groupsRide %}
						<ul class="col-md-5">
							<li><i class="fa fa-users"></i>&nbsp; <a href="{{ path('panel_group_timeline',{'id': group.id}) }}">{{ group.Name }}</a></li>
						</ul>
						<ul class="col-md-5">
							<li><i class="fa fa-mail-forward"></i><a href="{{ path('panel_ride_current', {'id': group.ride.id}) }}">&nbsp; {{ 'Ride.go'|trans }}</a></li>
						</ul>
				{% endfor %}
			</div>
        </div>
			{% else %}
        {% endif %}
        <!-- END rideGropus -->

        <!-- START Resume -->
			<div class="col-md-12 resume">				
				<!-- START resumeGroups -->
				{% if groupsMember|length > 0 or groupsAdmin|length > 0 %}
				<div class="col-md-12 resumeGroups alert alert-warning" id="groups">
					<div>
						<h1 class="alert"> <span class="alert alert-warning"><i class="fa fa-users"></i> {{ 'Groups.mine'|trans }}</span> 
							<span class="pull-right">
								<a class="btn btn-xs btn-success" href="{{ path('panel_group_new') }}">
									<i class="fa fa-plus-circle"></i>&nbsp; {{ 'Groups.new.title'|trans }}
								</a>
								<a class="btn btn-xs btn-success" href="{{ path('panel_group') }}">
									<i class="fa fa-list-ul"></i>&nbsp; {{ 'Groups.list'|trans }}
								</a>
							</span>
						</h1>
						<div class="alert alert-warning">
							<table class="table">
								<thead>
									<tr>
										<th>#</th>
										<th>{{ 'Groups.data.name'|trans }}</th>
										<th>{{ 'Groups.data.activity'|trans }}</th>
										<th>{{ 'Groups.data.member'|trans }}</th>
										<th>{{ 'Groups.data.visibility'|trans }}</th>
										<th>{{ 'Groups.data.route'|trans }}</th>
										<th>{{ 'Groups.data.options'|trans }}</th>
									</tr>
								</thead>
							        <tbody>
							        {% for groupMember in groupsMember %}
							            <tr>
							                <td><i class="fa fa-users"></i></td>
							                <td>
							                	{% if groupMember.Admin.Id == user.Id %}
							                		<i rel="tooltip-top" title='{{ 'Admin'|trans }}' class="fa fa-key"></i>&nbsp;
							                	{% endif %}
							                 {{ groupMember.Name }}</td>
											<td><a href="{{ path('panel_group_timeline',{'id': groupMember.id}) }}"><i class="fa fa-comments-o"></i>&nbsp; {{ 'Groups.data.chat'|trans }}</a></td>
											<td>
												<a href="{{ path('panel_group_disjoin', { 'id': groupMember.id }) }}" type="button" 
												class="btn btn-default btn-xs group-disjoin">
													<i class="fa fa-sign-out"></i> {{ 'DisJoin'|trans }}
												</a>
											</td>
											{% if groupMember.Admin.Id == user.Id %}
								                {% if  groupMember.Visibility == 0 %}
								                <td><i rel="tooltip-top" title='{{ 'ChangeVisibility'|trans }}' class="fa fa-unlock btn btn-xs btn-success"
								                groupVisibility="0" changeVisibility="{{ path('panel_group_changeVisibility', { 'id': groupMember.id, 'visibility': "replace" }) }}";
												id="visibility-{{ groupMember.id }}" data-toggle="confirmationChange"></i>&nbsp; {{ 'Groups.visibility.public'|trans }}</td>
								                {% elseif groupMember.Visibility == 1 %}
								                <td><i rel="tooltip-top" title='{{ 'ChangeVisibility'|trans }}' class="fa fa-lock btn btn-xs btn-danger"
								                groupVisibility="1" changeVisibility="{{ path('panel_group_changeVisibility', { 'id': groupMember.id, 'visibility': "replace" }) }}";
												id="visibility-{{ groupMember.id }}" data-toggle="confirmationChange"></i>&nbsp; {{ 'Groups.visibility.private'|trans }}</td>
								                {% elseif groupMember.Visibility == 2 %}
								                <td><i rel="tooltip-top" title='{{ 'ChangeVisibility'|trans }}' class="fa fa-eye-slash btn btn-xs btn-warning"
								                groupVisibility="2" changeVisibility="{{ path('panel_group_changeVisibility', { 'id': groupMember.id, 'visibility': "replace" }) }}";
												id="visibility-{{ groupMember.id }}" data-toggle="confirmationChange"></i>&nbsp; {{ 'Groups.visibility.hidden'|trans }}</td>
								                {% endif %}
								             {% else %}   
								             {% if  groupMember.Visibility == 0 %}
								                <td><i class="fa fa-unlock btn btn-xs btn-success"></i>&nbsp; {{ 'Groups.visibility.public'|trans }}</td>
								                {% elseif groupMember.Visibility == 1 %}
								                <td><i class="fa fa-unlock btn btn-xs btn-danger"></i>&nbsp; {{ 'Groups.visibility.private'|trans }}</td>
								                {% elseif groupMember.Visibility == 2 %}
								                <td><i class="fa fa-unlock btn btn-xs btn-warning"></i>&nbsp; {{ 'Groups.visibility.hidden'|trans }}</td>
								              {% endif %}
							                {% endif %}
							               
							                {% if groupMember.route %}
							                <td><a href="{{ path('panel_route')}}{{ groupMember.Route.Id }}">{{ groupMember.Route.Name }}</a></td>
							                {% else %}
							                <td>{{ 'Groups.noRoute'|trans }}</td>
							                {% endif %}
											{% if groupMember.Admin.Id == user.Id %}
							                <td>
												<a class="btn btn-xs btn-default" href="{{ path('panel_group') }}{{ groupMember.id }}/edit"><i class="fa fa-pencil"></i>&nbsp;  {{ 'Options.edit'|trans }}</a>
												<a class="btn btn-xs btn-default" style="cursor:pointer;" data-href="{{ path('panel_group_delete', {'id': groupMember.id }) }}" data-toggle="confirmation"" data-title='{{ 'Confirmation.question'|trans }}' data-btnCancelLabel='{{ 'Confirmation.no'|trans }}' data-btnOkLabel='{{ 'Confirmation.yes'|trans }}'><i class="fa fa-trash-o"></i>&nbsp; {{ 'Options.delete'|trans }}</a>
							                </td>
							                {% else %}
							                <td>&nbsp;</td>
							                {% endif %}
							            </tr>
							        {% endfor %}
							        
							        {% for restGroup in restGroups %}
							        	{% if restGroup.Admin.Id == user.Id %}
							            <tr>
							                <td><i class="fa fa-users"></i></td>
							                <td>
							                	<i rel="tooltip-top" title='{{ 'Admin'|trans }}' class="fa fa-key"></i>&nbsp;
							                 {{ restGroup.Name }}</td>
											<td><i class="fa fa-warning	"></i>&nbsp; {{ 'NoAccess'|trans }}</a></td>
											<td>
												<a href="{{ path('panel_group_join', { 'id': restGroup.id }) }}" type="button" 
												class="btn btn-default btn-xs group-join">
													<i class="fa fa-sign-in"></i> {{ 'Join'|trans }}
												</a> 
											</td>
											{% if restGroup.Admin.Id == user.Id %}
								                {% if  restGroup.Visibility == 0 %}
								                <td><i rel="tooltip-top" title='{{ 'ChangeVisibility'|trans }}' class="fa fa-unlock btn btn-xs btn-success"
								                groupVisibility="0" changeVisibility="{{ path('panel_group_changeVisibility', { 'id': restGroup.id, 'visibility': "replace" }) }}";
												id="visibility-{{ restGroup.id }}" data-toggle="confirmationChange"></i>&nbsp; {{ 'Groups.visibility.public'|trans }}</td>
								                {% elseif restGroup.Visibility == 1 %}
								                <td><i rel="tooltip-top" title='{{ 'ChangeVisibility'|trans }}' class="fa fa-lock btn btn-xs btn-danger"
								                groupVisibility="1" changeVisibility="{{ path('panel_group_changeVisibility', { 'id': restGroup.id, 'visibility': "replace" }) }}";
												id="visibility-{{ restGroup.id }}" data-toggle="confirmationChange"></i>&nbsp; {{ 'Groups.visibility.private'|trans }}</td>
								                {% elseif restGroup.Visibility == 2 %}
								                <td><i rel="tooltip-top" title='{{ 'ChangeVisibility'|trans }}' class="fa fa-eye-slash btn btn-xs btn-warning"
								                groupVisibility="2" changeVisibility="{{ path('panel_group_changeVisibility', { 'id': restGroup.id, 'visibility': "replace" }) }}";
												id="visibility-{{ restGroup.id }}" data-toggle="confirmationChange"></i>&nbsp; {{ 'Groups.visibility.hidden'|trans }}</td>
								                {% endif %}
								             {% else %}   
								             {% if  restGroup.Visibility == 0 %}
								                <td><i class="fa fa-unlock btn btn-xs btn-success"></i>&nbsp; {{ 'Groups.visibility.public'|trans }}</td>
								                {% elseif restGroup.Visibility == 1 %}
								                <td><i class="fa fa-unlock btn btn-xs btn-danger"></i>&nbsp; {{ 'Groups.visibility.private'|trans }}</td>
								                {% elseif restGroup.Visibility == 2 %}
								                <td><i class="fa fa-unlock btn btn-xs btn-warning"></i>&nbsp; {{ 'Groups.visibility.hidden'|trans }}</td>
								              {% endif %}
							                {% endif %}
							               
							                {% if restGroup.route %}
							                <td><a href="{{ path('panel_route')}}{{ restGroup.Route.Id }}">{{ restGroup.Route.Name }}</a></td>
							                {% else %}
							                <td>{{ 'Groups.noRoute'|trans }}</td>
							                {% endif %}
											{% if restGroup.Admin.Id == user.Id %}
							                <td>
												<a class="btn btn-xs btn-default" href="{{ path('panel_group') }}{{ restGroup.id }}/edit"><i class="fa fa-pencil"></i>&nbsp;  {{ 'Options.edit'|trans }}</a>
												<a class="btn btn-xs btn-default" style="cursor:pointer;" data-href="{{ path('panel_group_delete', {'id': restGroup.id }) }}" data-toggle="confirmation"" data-title='{{ 'Confirmation.question'|trans }}' data-btnCancelLabel='{{ 'Confirmation.no'|trans }}' data-btnOkLabel='{{ 'Confirmation.yes'|trans }}'><i class="fa fa-trash-o"></i>&nbsp; {{ 'Options.delete'|trans }}</a>
							                </td>
							                {% else %}
							                <td>&nbsp;</td>
							                {% endif %}
							            </tr>
							            {% endif %}
							        {% endfor %}
							        </tbody>
							</table>
						</div>
					</div>
				</div>
				{% else %}
				<div class="col-md-12 resumeGroups alert alert-warning" id="groups">
					<div>
						<i class="fa fa-users fa-5x pull-left alert-warning"></i>
						<h4 class="alert alert-warning">
						{{ 'Groups.empty'|trans }}
						&nbsp;&nbsp;
						<a class="btn btn-warning btn-outline" href="{{ path('panel_group_new') }}"><i class="fa fa-hand-o-right"></i> {{ 'Groups.new.title'|trans }}</a>
							&nbsp;
						<a class="btn btn-warning btn-outline" href="{{ path('panel_group') }}">
							<i class="fa fa-list-ul"></i>&nbsp; {{ 'Groups.list'|trans }}
						</a>
						</h4>
					</div>
				</div>
				{% endif %}
				
				<!-- START resumeRoutes -->
				<div class="col-md-12 resumeRoutes alert alert-warning" id="routes">
				{% if routes|length <= 0 %}
					<div>
						<i class="fa fa-location-arrow fa-5x pull-left alert-warning"></i>
						<h4 class="alert alert-warning">
						{{ 'Route.empty'|trans }}
						&nbsp;&nbsp;
						<a class="btn btn-warning btn-outline" href="{{ path('panel_route_new') }}"><i class="fa fa-hand-o-right"></i> {{ 'Route.new.title'|trans }}</a>
							&nbsp;
						<a class="btn btn-warning btn-outline" href="{{ path('panel_route') }}">
							<i class="fa fa-list-ul"></i>&nbsp; {{ 'Route.list'|trans }}
						</a>
						</h4>
					</div>
				{% elseif routes|length > 0 %}
					<div>
						<h1 class="alert"> <span class="alert alert-warning"><i class="fa fa-location-arrow"></i> {{ 'Route.mine'|trans }}</span> 
							<span class="pull-right">
								<a class="btn btn-xs btn-success" href="{{ path('panel_route_new') }}">
									<i class="fa fa-plus-circle"></i>&nbsp; {{ 'Route.new.title'|trans }}
								</a>
								<a class="btn btn-xs btn-success" href="{{ path('panel_route') }}">
									<i class="fa fa-list-ul"></i>&nbsp; {{ 'Route.list'|trans }}
								</a>
							</span>
						</h1>
						<div class="alert alert-warning">
							<table class="table">
								<thead>
									<tr>
										<th>#</th>
										<th>{{ 'Route.data.name'|trans }}</th>
										<th>{{ 'Route.data.map'|trans }}</th>
										<th>{{ 'Route.data.options'|trans }}</th>
									</tr>
								</thead>
							        <tbody>
							        {% for route in routes %}
							            <tr>
							                <td><i class="fa fa-location-arrow"></i></td>
							                <td>{{ route.name }}</td>
							                <td><a href="{{ path('panel_route')}}{{ route.Id }}"><i class="fa fa-map-marker"></i>&nbsp; Ver</a></td>
							                <td>
												<a class="btn btn-xs btn-default" href="{{ path('panel_route_edit', {'id': route.id }) }}"><i class="fa fa-pencil"></i>&nbsp;  {{ 'Options.edit'|trans }}</a>
												<a class="btn btn-xs btn-default" style="cursor:pointer;" data-href="{{ path('panel_route_delete', {'id': route.id }) }}" data-toggle="confirmation" data-btnCancelLabel='{{ 'Confirmation.no'|trans }}' data-btnOkLabel='{{ 'Confirmation.yes'|trans }}' data-title='{{ 'Confirmation.question'|trans }}'><i class="fa fa-trash-o"></i>&nbsp; {{ 'Options.delete'|trans }}</a>
							                </td>
							            </tr>
							        {% endfor %}
							        </tbody>
							</table>
						</div>
					</div>
					{% endif %}
				</div>
				<!-- END resumeRoutes -->	
				<!-- START resumeChilds -->
				<div class="col-md-12 resumeChilds alert alert-warning" id="childs">
				{% if childs|length <= 0 %}
					<div>
						<i class="fa fa-user fa-5x pull-left alert-warning"></i>
						<h4 class="alert alert-warning">
						{{ 'Children.empty'|trans }}
						&nbsp;&nbsp;
						<a class="btn btn-warning btn-outline" href="{{ path('panel_child_new') }}"><i class="fa fa-hand-o-right"></i> {{ 'Children.register'|trans }}</a>
						</h4>
					</div>
				{% elseif childs|length > 0 %}
					<div>
						<h1 class="alert"> <span class="alert alert-warning"><i class="fa fa-user"></i> {{ 'Children.mine'|trans }}</span> 
							<span class="pull-right">
								<a class="btn btn-xs btn-success" href="{{ path('panel_child_new') }}">
									<i class="fa fa-plus-circle"></i>&nbsp; {{ 'Children.new.title'|trans }}
								</a>
								<a class="btn btn-xs btn-success" href="{{ path('panel_child') }}">
									<i class="fa fa-list-ul"></i>&nbsp; {{ 'Children.list'|trans }}
								</a>
							</span>
						</h1>
						<div class="alert alert-warning">
							<table class="table">
								<thead>
									<tr>
										<th>#</th>
										<th>{{ 'Children.data.name'|trans }}</th>
										<th>{{ 'Children.data.visibility'|trans }}</th>
										<th>{{ 'Children.data.age'|trans }}</th>
										<th>{{ 'Children.data.options'|trans }}</th>
									</tr>
								</thead>
							        <tbody>
							        {% for child in childs %}
							            <tr>
							            {% if  child.Gender == "boy" %}
							                <td><i class="fa fa-male"></i></td>
							            {% else %}  
							               <td><i class="fa fa-female"></i></td>
							             {% endif %}
							                <td>{{ child.nick }}</td>
							                {% if  child.Visibility == 1 %}
							                <td><i class="fa fa-eye btn btn-xs btn-success"></i>&nbsp; {{ 'Children.visibility.public'|trans }}</td>
							                {% else %}
							                <td><i class="fa fa-eye-slash btn btn-xs btn-danger"></i>&nbsp; {{ 'Children.visibility.private'|trans }}</td>
							                {% endif %}
											<td><i class="fa fa-calendar-o"></i>&nbsp; {{ child.datebirth|getTimeAgo}}</td>
							                <td>
												<a class="btn btn-xs btn-default" href="{{ path('panel_child_edit', {'id': child.id}) }}"><i class="fa fa-pencil"></i>&nbsp; {{ 'Options.edit'|trans }}</a>
												<a class="btn btn-xs btn-default" style="cursor:pointer;" data-btnCancelLabel='{{ 'Confirmation.no'|trans }}' data-btnOkLabel='{{ 'Confirmation.yes'|trans }}' data-href="{{ path('panel_child_delete', {'id': child.id }) }}" data-toggle="confirmation" data-title='{{ 'Confirmation.question'|trans }}'><i class="fa fa-trash-o"></i>&nbsp; {{ 'Options.delete'|trans }}</a>
							                </td>
							            </tr>
							        {% endfor %}
							        </tbody>
							</table>
						</div>
					</div>
				
				{% endif %}

				</div>
				<!-- END resumeChilds -->	
			</div>
			<!-- END Resume -->
    </div>
    <!-- END Bootstrap row -->
{% endblock %}

{% block js %}
{{ parent() }} 
	{% include 'TrazeoFrontBundle:Panel:_tutorial.html.twig' %}
{% endblock %}

